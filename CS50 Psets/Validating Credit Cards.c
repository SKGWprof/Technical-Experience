#include <stdio.h>
#include <stdlib.h>
#include <cs50.h>
#include <math.h>
#include <string.h>



int main(void)
{
    long number = get_long("number: \n");
    int A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P;
    string type;
    if ((number / (long) pow(10, 14)) < 56 && number / (long) pow(10, 14) > 50)
    {
        type = "MASTERCARD";
    }
    else if (number / (long) pow(10, 15) == 4)
    {
        type = "VISA";
    }
    else if (number / (long) pow(10, 12) == 4)
    {
        type = "VISAB";
    }
    else if (number / (long) pow(10, 13) == 37 || number / (long) pow(10, 13) == 34)
    {
        type = "AMEX";
    }
    else
    {
        type = "INVALID";
    }
    if (strcmp(type, "INVALID") == 0)
    {
        printf("INVALID\n");
        exit(0);
    }
    else if (strcmp(type, "MASTERCARD") == 0)
    {
        A = 5;
        B = (number / (long) pow(10, 14)) - 10 * A;
        C = ((number / (long) pow(10, 13)) - 100 * A) - 10 * B;
        D = (((number / (long) pow(10, 12)) - 1000 * A) - 100 * B) - 10 * C;
        E = ((((number / (long) pow(10, 11)) - 10000 * A) - 1000 * B) - 100 * C) - 10 * D;
        F = (((((number / (long) pow(10, 10)) - 100000 * A) - 10000 * B) - 1000 * C) - 100 * D) - 10 * E;
        G = ((((((number / (long) pow(10, 9)) - 1000000 * A) - 100000 * B) - 10000 * C) - 1000 * D) - 100 * E) - 10 * F;
        H = (((((((number / (long) pow(10, 8)) - 10000000 * A) - 1000000 * B) - 100000 * C) - 10000 * D) - 1000 * E) - 100 * F) - 10 * G;
        I = ((((((((number / (long) pow(10, 7)) - 100000000 * A) - 10000000 * B) - 1000000 * C) - 100000 * D) - 10000 * E) - 1000 * F) - 100 * G) - 10 * H;
        J = (((((((((number / (long) pow(10, 6)) - 1000000000 * A) - 100000000 * B) - 10000000 * C) - 1000000 * D) - 100000 * E) - 10000 * F) - 1000 * G) - 100 * H) - 10 * I;
        K = ((((((((((number / (long) pow(10, 5)) - 10000000000 * A) - 1000000000 * B) - 100000000 * C) - 10000000 * D) - 1000000 * E) - 100000 * F) - 10000 * G) - 1000 * H) - 100 * I) - 10 * J;
        L = (((((((((((number / (long) pow(10, 4)) - 100000000000 * A) - 10000000000 * B) - 1000000000 * C) - 100000000 * D) - 10000000 * E) - 1000000 * F) - 100000 * G) - 10000 * H) - 1000 * I) - 100 * J) - 10 * K;
        M = ((((((((((((number / (long) pow(10, 3)) - 1000000000000 * A) - 100000000000 * B) - 10000000000 * C) - 1000000000 * D) - 100000000 * E) - 10000000 * F) - 1000000 * G) - 100000 * H) - 10000 * I) - 1000 * J) - 100 * K) - 10 * L;
        N = (((((((((((((number / (long) pow(10, 2)) - 10000000000000 * A) - 1000000000000 * B) - 100000000000 * C) - 10000000000 * D) - 1000000000 * E) - 100000000 * F) - 10000000 * G) - 1000000 * H) - 100000 * I) - 10000 * J) - 1000 * K) - 100 * L) - 10 * M;
        O = ((((((((((((((number / (long) pow(10, 1)) - 100000000000000 * A) - 10000000000000 * B) - 1000000000000 * C) - 100000000000 * D) - 10000000000 * E) - 1000000000 * F) - 100000000 * G) - 10000000 * H) - 1000000 * I) - 100000 * J) - 10000 * K) - 1000 * L) - 100 * M) - 10 * N;
        P = number - 1000000000000000 * A - 100000000000000 * B - 10000000000000 * C - 1000000000000 * D - 100000000000 * E - 10000000000 * F - 1000000000 * G - 100000000 * H - 10000000 * I - 1000000 * J - 100000 * K - 10000 * L - 1000 * M - 100 * N - 10 * O;
    }
    else if (strcmp(type, "AMEX") == 0)
    {
        A = 3;
        B = (number / (long) pow(10, 13)) - 10 * A;
        C = ((number / (long) pow(10, 12)) - 100 * A) - 10 * B;
        D = (((number / (long) pow(10, 11)) - 1000 * A) - 100 * B) - 10 * C;
        E = ((((number / (long) pow(10, 10)) - 10000 * A) - 1000 * B) - 100 * C) - 10 * D;
        F = (((((number / (long) pow(10, 9)) - 100000 * A) - 10000 * B) - 1000 * C) - 100 * D) - 10 * E;
        G = ((((((number / (long) pow(10, 8)) - 1000000 * A) - 100000 * B) - 10000 * C) - 1000 * D) - 100 * E) - 10 * F;
        H = (((((((number / (long) pow(10, 7)) - 10000000 * A) - 1000000 * B) - 100000 * C) - 10000 * D) - 1000 * E) - 100 * F) - 10 * G;
        I = ((((((((number / (long) pow(10, 6)) - 100000000 * A) - 10000000 * B) - 1000000 * C) - 100000 * D) - 10000 * E) - 1000 * F) - 100 * G) - 10 * H;
        J = (((((((((number / (long) pow(10, 5)) - 1000000000 * A) - 100000000 * B) - 10000000 * C) - 1000000 * D) - 100000 * E) - 10000 * F) - 1000 * G) - 100 * H) - 10 * I;
        K = ((((((((((number / (long) pow(10, 4)) - 10000000000 * A) - 1000000000 * B) - 100000000 * C) - 10000000 * D) - 1000000 * E) - 100000 * F) - 10000 * G) - 1000 * H) - 100 * I) - 10 * J;
        L = (((((((((((number / (long) pow(10, 3)) - 100000000000 * A) - 10000000000 * B) - 1000000000 * C) - 100000000 * D) - 10000000 * E) - 1000000 * F) - 100000 * G) - 10000 * H) - 1000 * I) - 100 * J) - 10 * K;
        M = ((((((((((((number / (long) pow(10, 2)) - 1000000000000 * A) - 100000000000 * B) - 10000000000 * C) - 1000000000 * D) - 100000000 * E) - 10000000 * F) - 1000000 * G) - 100000 * H) - 10000 * I) - 1000 * J) - 100 * K) - 10 * L;
        N = (((((((((((((number / (long) pow(10, 1)) - 10000000000000 * A) - 1000000000000 * B) - 100000000000 * C) - 10000000000 * D) - 1000000000 * E) - 100000000 * F) - 10000000 * G) - 1000000 * H) - 100000 * I) - 10000 * J) - 1000 * K) - 100 * L) - 10 * M;
        O = number - 100000000000000 * A - 10000000000000 * B - 1000000000000 * C - 100000000000 * D - 10000000000 * E - 1000000000 * F - 100000000 * G - 10000000 * H - 1000000 * I - 100000 * J - 10000 * K - 1000 * L - 100 * M - 10 * N;
        P = 1;
    }
    else if (strcmp(type, "VISA") == 0)
    {
        A = 4;
        B = (number / (long) pow(10, 14)) - 10 * A;
        C = ((number / (long) pow(10, 13)) - 100 * A) - 10 * B;
        D = (((number / (long) pow(10, 12)) - 1000 * A) - 100 * B) - 10 * C;
        E = ((((number / (long) pow(10, 11)) - 10000 * A) - 1000 * B) - 100 * C) - 10 * D;
        F = (((((number / (long) pow(10, 10)) - 100000 * A) - 10000 * B) - 1000 * C) - 100 * D) - 10 * E;
        G = ((((((number / (long) pow(10, 9)) - 1000000 * A) - 100000 * B) - 10000 * C) - 1000 * D) - 100 * E) - 10 * F;
        H = (((((((number / (long) pow(10, 8)) - 10000000 * A) - 1000000 * B) - 100000 * C) - 10000 * D) - 1000 * E) - 100 * F) - 10 * G;
        I = ((((((((number / (long) pow(10, 7)) - 100000000 * A) - 10000000 * B) - 1000000 * C) - 100000 * D) - 10000 * E) - 1000 * F) - 100 * G) - 10 * H;
        J = (((((((((number / (long) pow(10, 6)) - 1000000000 * A) - 100000000 * B) - 10000000 * C) - 1000000 * D) - 100000 * E) - 10000 * F) - 1000 * G) - 100 * H) - 10 * I;
        K = ((((((((((number / (long) pow(10, 5)) - 10000000000 * A) - 1000000000 * B) - 100000000 * C) - 10000000 * D) - 1000000 * E) - 100000 * F) - 10000 * G) - 1000 * H) - 100 * I) - 10 * J;
        L = (((((((((((number / (long) pow(10, 4)) - 100000000000 * A) - 10000000000 * B) - 1000000000 * C) - 100000000 * D) - 10000000 * E) - 1000000 * F) - 100000 * G) - 10000 * H) - 1000 * I) - 100 * J) - 10 * K;
        M = ((((((((((((number / (long) pow(10, 3)) - 1000000000000 * A) - 100000000000 * B) - 10000000000 * C) - 1000000000 * D) - 100000000 * E) - 10000000 * F) - 1000000 * G) - 100000 * H) - 10000 * I) - 1000 * J) - 100 * K) - 10 * L;
        N = (((((((((((((number / (long) pow(10, 2)) - 10000000000000 * A) - 1000000000000 * B) - 100000000000 * C) - 10000000000 * D) - 1000000000 * E) - 100000000 * F) - 10000000 * G) - 1000000 * H) - 100000 * I) - 10000 * J) - 1000 * K) - 100 * L) - 10 * M;
        O = ((((((((((((((number / (long) pow(10, 1)) - 100000000000000 * A) - 10000000000000 * B) - 1000000000000 * C) - 100000000000 * D) - 10000000000 * E) - 1000000000 * F) - 100000000 * G) - 10000000 * H) - 1000000 * I) - 100000 * J) - 10000 * K) - 1000 * L) - 100 * M) - 10 * N;
        P = number - 1000000000000000 * A - 100000000000000 * B - 10000000000000 * C - 1000000000000 * D - 100000000000 * E - 10000000000 * F - 1000000000 * G - 100000000 * H - 10000000 * I - 1000000 * J - 100000 * K - 10000 * L - 1000 * M - 100 * N - 10 * O;
    }
    else if (strcmp(type, "VISAB") == 0)
    {
        A = 4;
        B = (number / (long) pow(10, 11)) - 10 * A;
        C = ((number / (long) pow(10, 10)) - 100 * A) - 10 * B;
        D = (((number / (long) pow(10, 9)) - 1000 * A) - 100 * B) - 10 * C;
        E = ((((number / (long) pow(10, 8)) - 10000 * A) - 1000 * B) - 100 * C) - 10 * D;
        F = (((((number / (long) pow(10, 7)) - 100000 * A) - 10000 * B) - 1000 * C) - 100 * D) - 10 * E;
        G = ((((((number / (long) pow(10, 6)) - 1000000 * A) - 100000 * B) - 10000 * C) - 1000 * D) - 100 * E) - 10 * F;
        H = (((((((number / (long) pow(10, 5)) - 10000000 * A) - 1000000 * B) - 100000 * C) - 10000 * D) - 1000 * E) - 100 * F) - 10 * G;
        I = ((((((((number / (long) pow(10, 4)) - 100000000 * A) - 10000000 * B) - 1000000 * C) - 100000 * D) - 10000 * E) - 1000 * F) - 100 * G) - 10 * H;
        J = (((((((((number / (long) pow(10, 3)) - 1000000000 * A) - 100000000 * B) - 10000000 * C) - 1000000 * D) - 100000 * E) - 10000 * F) - 1000 * G) - 100 * H) - 10 * I;
        K = ((((((((((number / (long) pow(10, 2)) - 10000000000 * A) - 1000000000 * B) - 100000000 * C) - 10000000 * D) - 1000000 * E) - 100000 * F) - 10000 * G) - 1000 * H) - 100 * I) - 10 * J;
        L = (((((((((((number / (long) pow(10, 1)) - 100000000000 * A) - 10000000000 * B) - 1000000000 * C) - 100000000 * D) - 10000000 * E) - 1000000 * F) - 100000 * G) - 10000 * H) - 1000 * I) - 100 * J) - 10 * K;
        M = number - 1000000000000 * A - 100000000000 * B - 10000000000 * C - 1000000000 * D - 100000000 * E - 10000000 * F - 1000000 * G - 100000 * H - 10000 * I - 1000 * J - 100 * K - 10 * L;
        N = 1;
        O = 1;
        P = 1;
    }
    else
    {
        printf("INVALID\n");
        exit(0);
    }
    int A1 = 0;
    int A2 = 0;
    int B1 = 0;
    int B2 = 0;
    int C1 = 0;
    int C2 = 0;
    int D1 = 0;
    int D2 = 0;
    int E1 = 0;
    int E2 = 0;
    int F1 = 0;
    int F2 = 0;
    int G1 = 0;
    int G2 = 0;
    int H1 = 0;
    int H2 = 0;
    int I1 = 0;
    int I2 = 0;
    int J1 = 0;
    int J2 = 0;
    int K1 = 0;
    int K2 = 0;
    int L1 = 0;
    int L2 = 0;
    int M1 = 0;
    int M2 = 0;
    int N1 = 0;
    int N2 = 0;
    int O1 = 0;
    int O2 = 0;
    int P1 = 0;
    int P2 = 0;
    string nature;
     if (A <= 4)
        {
            A1 = 2 * A;
            nature = "single";
        }
        if (A > 4)
        {
            A1 = (2 * A) / 10;
            A2 = (2 * A) - 10;
            nature = "doubled";
        }
        if (B <= 4)
        {
            B1 = 2 * B;
            nature = "single";
        }
        if (B > 4)
        {
            B1 = (2 * B) / 10;
            B2 = (2 * B) - 10;
            nature = "doubled";
        }
        if (C <= 4)
        {
            C1 = 2 * C;
            nature = "single";
        }
        if (C > 4)
        {
            C1 = (2 * C) / 10;
            C2 = (2 * C) - 10;
            nature = "doubled";
        }
        if (D <= 4)
        {
            D1 = 2 * D;
            nature = "single";
        }
        if (D > 4)
        {
            D1 = (2 * D) / 10;
            D2 = (2 * D) - 10;
            nature = "doubled";
        }
        if (E <= 4)
        {
            E1 = 2 * E;
            nature = "single";
        }
        if (E > 4)
        {
            E1 = (2 * E) / 10;
            E2 = (2 * E) - 10;
            nature = "doubled";
        }
        if (F <= 4)
        {
            F1 = 2 * F;
            nature = "single";
        }
        if (F > 4)
        {
            F1 = (2 * F) / 10;
            F2 = (2 * F) - 10;
            nature = "doubled";
        }
        if (G <= 4)
        {
            G1 = 2 * G;
            nature = "single";
        }
        if (G > 4)
        {
            G1 = (2 * G) / 10;
            G2 = (2 * G) - 10;
            nature = "doubled";
        }
        if (H <= 4)
        {
            H1 = 2 * H;
            nature = "single";
        }
        if (H > 4)
        {
            H1 = (2 * H) / 10;
            H2 = (2 * H) - 10;
            nature = "doubled";
        }
        if (I <= 4)
        {
            I1 = 2 * I;
            nature = "single";
        }
        if (I > 4)
        {
            I1 = (2 * I) / 10;
            I2 = (2 * I) - 10;
            nature = "doubled";
        }
        if (J <= 4)
        {
            J1 = 2 * J;
            nature = "single";
        }
        if (J > 4)
        {
            J1 = (2 * J) / 10;
            J2 = (2 * J) - 10;
            nature = "doubled";
        }
        if (K <= 4)
        {
            K1 = 2 * K;
            nature = "single";
        }
        if (K > 4)
        {
            K1 = (2 * K) / 10;
            K2 = (2 * K) - 10;
            nature = "doubled";
        }
        if (L <= 4)
        {
            L1 = 2 * L;
            nature = "single";
        }
        if (L > 4)
        {
            L1 = (2 * L) / 10;
            L2 = (2 * L) - 10;
            nature = "doubled";
        }
        if (M <= 4)
        {
            M1 = 2 * M;
            nature = "single";
        }
        if (M > 4)
        {
            M1 = (2 * M) / 10;
            M2 = (2 * M) - 10;
            nature = "doubled";
        }
        if (strcmp(type, "MASTERCARD") == 0 || strcmp(type, "AMEX") || strcmp(type, "VISA"))
        {
            if (N <= 4)
        {
            N1 = 2 * N;
            nature = "single";
        }
        if (N > 4)
        {
            N1 = (2 * N) / 10;
            N2 = (2 * N) - 10;
            nature = "doubled";
        }
        if (O <= 4)
        {
            O1 = 2 * O;
            nature = "single";
        }
        if (O > 4)
        {
            O1 = (2 * O) / 10;
            O2 = (2 * O) - 10;
            nature = "doubled";
        }
        if (strcmp(type, "MASTERCARD") == 0 || strcmp(type, "VISA") == 0)
        {
            if (P <= 4)
        {
            P1 = 2 * P;
            nature = "single";
        }
        if (P > 4)
        {
            P1 = (2 * P) / 10;
            P2 = (2 * P) - 10;
            nature = "doubled";
        }
        }
        }
        if (strcmp(type, "MASTERCARD") == 0 && (A1 + A2 + B + C1 + C2 + D + E1 + E2 + F + G1 + G2 + H + I1 + I2 + J + K1 + K2 + L + M1 + M2 + N + O1 + O2 + P) % 10 == 0)
        {
            printf("MASTERCARD\n");
        }
        else if (strcmp(type, "AMEX") == 0 && (A + B1 + B2 + C + D1 + D2 + E + F1 + F2 + G + H1 + H2 + I + J1 + J2 + K + L1 + L2 + M + N1 + N2 + O) % 10 == 0)
        {
            printf("AMEX\n");
        }
        else if (strcmp(type, "VISA") == 0 && (A1 + A2 + B + C1 + C2 + D + E1 + E2 + F + G1 + G2 + H + I1 + I2 + J + K1 + K2 + L + M1 + M2 + N + O1 + O2 + P) % 10 == 0)
        {
            printf("VISA\n");
        }
        else if (strcmp(type, "VISAB") == 0 && (A + B1 + B2 + C + D1 + D2 + E + F1 + F2 + G + H1 + H2 + I + J1 + J2 + K + L1 + L2 + M) % 10 == 0)
        {
            printf("VISA\n");
        }
        else
        {
            printf("INVALID\n");
        }
}

/*
void check(void)
{
    if (number / (long) pow(10, 15) == 5)
    {
        string type = "MASTERCARD";
    }
    else if (number / int pow(10, 15) == 4 || number / int pow(10, 12) == 4)
    {
        string type = "VISA";
    }
    else if (number / int pow(10, 14) == 3)
    {
        string type = "AMEX";
    }
    else
    {
        string type = "INVALID";
    }
}

void numbercheck(void)
{
    if (type == INVALID)
    {
        printf("INVALID");
    }
    else if (type == MASTERCARD)
    {
        int A = 5
        int B = (number / (long) pow(10, 14)) - 10 * A
        int C = ((number / (long) pow(10, 13)) - 100 * A) - 10 * B
        int D = (((number / (long) pow(10, 12)) - 1000 * A) - 100 * B) - 10 * C
        int E = ((((number / (long) pow(10, 11)) - 10000 * A) - 1000 * B) - 100 * C) - 10 * D
        int F = (((((number / (long) pow(10, 10)) - 100000 * A) - 10000 * B) - 1000 * C) - 100 * D) - 10 * E
        int G = ((((((number / (long) pow(10, 9)) - 1000000 * A) - 100000 * B) - 10000 * C) - 1000 * D) - 100 * E) - 10 * F
        int H = (((((((number / (long) pow(10, 8)) - 10000000 * A) - 1000000 * B) - 100000 * C) - 10000 * D) - 1000 * E) - 100 * F) - 10 * G
        int I = ((((((((number / (long) pow(10, 7)) - 100000000 * A) - 10000000 * B) - 1000000 * C) - 100000 * D) - 10000 * E) - 1000 * F) - 100 * G) - 10 * H
        int J = (((((((((number / (long) pow(10, 6)) - 1000000000 * A) - 100000000 * B) - 10000000 * C) - 1000000 * D) - 100000 * E) - 10000 * F) - 1000 * G) - 100 * H) - 10 * I
        int K = ((((((((((number / (long) pow(10, 5)) - 10000000000 * A) - 1000000000 * B) - 100000000 * C) - 10000000 * D) - 1000000 * E) - 100000 * F) - 10000 * G) - 1000 * H) - 100 * I) - 10 * J
        int L = (((((((((((number / (long) pow(10, 4)) - 100000000000 * A) - 10000000000 * B) - 1000000000 * C) - 100000000 * D) - 10000000 * E) - 1000000 * F) - 100000 * G) - 10000 * H) - 1000 * I) - 100 * J) - 10 * K
        int M = ((((((((((((number / (long) pow(10, 3)) - 1000000000000 * A) - 100000000000 * B) - 10000000000 * C) - 1000000000 * D) - 100000000 * E) - 10000000 * F) - 1000000 * G) - 100000 * H) - 10000 * I) - 1000 * J) - 100 * K) - 10 * L
        int N = (((((((((((((number / (long) pow(10, 2)) - 10000000000000 * A) - 1000000000000 * B) - 100000000000 * C) - 10000000000 * D) - 1000000000 * E) - 100000000 * F) - 10000000 * G) - 1000000 * H) - 100000 * I) - 10000 * J) - 1000 * K) - 100 * L) - 10 * M
        int O = ((((((((((((((number / (long) pow(10, 1)) - 100000000000000 * A) - 10000000000000 * B) - 1000000000000 * C) - 100000000000 * D) - 10000000000 * E) - 1000000000 * F) - 100000000 * G) - 10000000 * H) - 1000000 * I) - 100000 * J) - 10000 * K) - 1000 * L) - 100 * M) - 10 * N
        int P = number - 1000000000000000 * A - 100000000000000 * B - 10000000000000 * C - 1000000000000 * D - 100000000000 * E - 10000000000 * F - 1000000000 * G - 100000000 * H - 10000000 * I - 1000000 * J - 100000 * K - 10000 * L - 1000 * M - 100 * N - 10 * O
    }
    else
    {
        break;
    }
}
*/
